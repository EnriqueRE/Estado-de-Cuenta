__author__ = 'enriqueramirez'import jsonimport urllib2, base64import requestsfrom collections import OrderedDictclass PreAccountStatement:    def fix_date (self, date):        dates = date.split('.')        dates[0], dates[-1] = dates[-1], dates[0]        return '-'.join(dates)    def fix_id (self, id):        if len(id) <= 6:            tmp_student = 'A00' + id        else:            tmp_student = 'A0' + id        return tmp_student    def to_json (self):        return json.dumps(self, default=lambda o: o.__dict__,                          sort_keys=True, indent=4)    def __init__ (self, line):        self.statement_date = self.fix_date(line[8])        self.statement_student = self.fix_id(line[3])        self.statement_value = line[13]        self.statement_code = line[4]    def __unicode__ (self):        return "{%s, %s, %s, %s}" % (            self.statement_date, self.statement_student, self.statement_code,            self.statement_value)class AccountStatement:    def __init__ (self, student_id, date, tuition, interests, positive,                  insurance,                  services):        self.statement_student = student_id        self.statement_date = date        self.statement_tuition = tuition        self.statement_interests = interests        self.statement_positive_balance = positive        self.statement_insurance = insurance        self.statement_diverse_services = services    def to_json(self):        return json.dumps(self, default=lambda direct: direct.__dict__,                          sort_keys=True, indent=4)    def upload(self):        url = "http://riego.chi.itesm.mx:8080/Statement/"        headers = {"Authorization": "Basic YWRtaW46YWRtaW4=",                   "Content-Type": "application/json"}        print self.to_json()        request = requests.post(url, data=self.to_json(), headers=headers)        print " REQUEST CODE: " +  str(request.status_code)class MonederoUser:    def __init__ (self,row):        self.student_id = row[0]        if ' ' in row[2]:            name = row[2].split(" ")            self.student_name = name[0]            self.student_middlename = name[1]        else:            self.student_name = row[2]            self.student_middlename = ""        self.student_lastname = row[3]        self.student_second_lastname = row[4]        self.student_badge_id = row[5]        self.student_email = self.student_id + "@itesm.mx"    def to_json (self):        return json.dumps(self, default=lambda direct: direct.__dict__,                          sort_keys=True, indent=4)    def upload(self):        url = "http://riego.chi.itesm.mx:8080/User/"        headers = {"Authorization": "Basic YWRtaW46YWRtaW4=",                   "Content-Type": "application/json"}        print self.to_json()        request = requests.post(url, data=self.to_json(), headers=headers)        print " REQUEST CODE: " +  str(request.status_code)